schema: '2.0'
stages:
  create_dataset:
    cmd: python -m src.create_dataset
    deps:
    - path: data/samsum-train.json
      md5: 814c01b3fd2420811ba324c7ce155583
      size: 10484215
    - path: data/squad2-train.json
      md5: 62108c273c268d70893182d5cf8df740
      size: 42123633
    - path: src/create_dataset.py
      md5: baf1fe962f140054769d27d60aca54be
      size: 2127
    outs:
    - path: data/train.json
      md5: 137940b1231a9ac2f369825816fd327d
      size: 10178040
  train:
    cmd: python -m src.train
    deps:
    - path: data/train.json
      md5: 16208c78766247c0ccd66c33ebbc1a98
      size: 10110854
    - path: src/train.py
      md5: 2517291145ba6b96bdcd43ae1ff2c432
      size: 1806
    outs:
    - path: models/gptj/
      md5: ae3a96ab3f1034b1fac795ef2471c44a.dir
      size: 6177232130
      nfiles: 2
  test:
    cmd: python -m src.test
    deps:
    - path: data/samsum-val.json
      md5: 997367780930689e7473b5569cf961e3
      size: 571716
    - path: models/gptj/
      md5: ae3a96ab3f1034b1fac795ef2471c44a.dir
      size: 6177232130
      nfiles: 2
    - path: src/test.py
      md5: 05f4291b94555d8989dced3312478e58
      size: 731
  generate_logits:
    cmd: python -m src.generate_gptj_logits
    deps:
    - path: data/train.json
      md5: 16208c78766247c0ccd66c33ebbc1a98
      size: 10110854
    - path: models/gptj/
      md5: ae3a96ab3f1034b1fac795ef2471c44a.dir
      size: 6177232130
      nfiles: 2
    - path: src/generate_gptj_logits.py
      md5: 2abec264cac33db09d929958229df1a4
      size: 1622
    outs:
    - path: data/train_embeddings_logits_only.joblib
      md5: a151883eadb9cb0ff645b80a4001dd08
      size: 7164017114
