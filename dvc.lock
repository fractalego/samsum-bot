schema: '2.0'
stages:
  create_dataset:
    cmd: python -m src.create_dataset
    deps:
    - path: data/samsum-train.json
      md5: 814c01b3fd2420811ba324c7ce155583
      size: 10484215
    - path: data/squad2-train.json
      md5: 62108c273c268d70893182d5cf8df740
      size: 42123633
    - path: src/create_dataset.py
      md5: 510dd55806f0df5296fe50fa12fd59e0
      size: 2127
    outs:
    - path: data/train.json
      md5: 7598e3481f27de860b3915613383b428
      size: 10299223
  train:
    cmd: python -m src.train
    deps:
    - path: data/train.json
      md5: 7598e3481f27de860b3915613383b428
      size: 10299223
    - path: src/train.py
      md5: c8620834183690eb2b5474274bb446d3
      size: 1966
    outs:
    - path: models/gptj/
      md5: 8061d04472c4ee10f71134dff43cb2b8
      size: 6239537347
  test:
    cmd: python -m src.test
    deps:
    - path: data/samsum-val.json
      md5: 997367780930689e7473b5569cf961e3
      size: 571716
    - path: models/gptj/
      md5: 8061d04472c4ee10f71134dff43cb2b8
      size: 6239537347
    - path: src/test.py
      md5: 7376e3a9a258f40660fabd444b709995
      size: 770
  generate_logits:
    cmd: python -m src.generate_gptj_logits
    deps:
    - path: data/train.json
      md5: 7598e3481f27de860b3915613383b428
      size: 10299223
    - path: models/gptj
      md5: 8061d04472c4ee10f71134dff43cb2b8
      size: 6239537347
    - path: src/generate_gptj_logits.py
      md5: 69da8d516297408c14c76e05f41de6bd
      size: 1648
    outs:
    - path: data/train_embeddings_logits_only.joblib
      md5: 1f17e81781accd736b51313cd5196150
      size: 7212105196
