schema: '2.0'
stages:
  create_dataset:
    cmd: python -m src.create_dataset
    deps:
    - path: data/samsum-train.json
      md5: 814c01b3fd2420811ba324c7ce155583
      size: 10484215
    - path: data/squad2-train.json
      md5: 62108c273c268d70893182d5cf8df740
      size: 42123633
    - path: src/create_dataset.py
      md5: baf1fe962f140054769d27d60aca54be
      size: 2127
    outs:
    - path: data/train.json
      md5: 137940b1231a9ac2f369825816fd327d
      size: 10178040
  train:
    cmd: python -m src.train
    deps:
    - path: data/train.json
      md5: 137940b1231a9ac2f369825816fd327d
      size: 10178040
    - path: src/train.py
      md5: 4de65c13311ee9980497c5b562db3ab9
      size: 1978
    outs:
    - path: models/gptj-0
      md5: e18cb8c1f8811ae11fd880446ae9e55b
      size: 6239537347
  test:
    cmd: python -m src.test
    deps:
    - path: data/samsum-val.json
      md5: 997367780930689e7473b5569cf961e3
      size: 571716
    - path: models/gptj-0
      md5: e18cb8c1f8811ae11fd880446ae9e55b
      size: 6239537347
    - path: src/test.py
      md5: 1aa0c4372b62a91754dc1687dd4751d4
      size: 901
  generate_logits:
    cmd: python -m src.generate_gptj_logits
    deps:
    - path: data/train.json
      md5: 137940b1231a9ac2f369825816fd327d
      size: 10178040
    - path: models/gptj-0
      md5: e18cb8c1f8811ae11fd880446ae9e55b
      size: 6239537347
    - path: src/generate_gptj_logits.py
      md5: 1d19f0fae787fff5827ad44fcc9491be
      size: 1650
    outs:
    - path: data/train_embeddings_logits_only.joblib
      md5: b291faba3ae704d7db5e8c6b3ad06f9f
      size: 7182571328
